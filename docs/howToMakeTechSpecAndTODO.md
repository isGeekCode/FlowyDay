# How to Make **Tech Spec** and **TODO**

> 이 문서는 *사람 + AI*가 함께 개발할 때, **Tech Spec**과 **TODO 문서를 어떻게 작성해야 AI가 프로젝트를 이어받아 계속 작업할 수 있는지**를 정의하는 가이드이다.
> 어떤 AI 모델이든 이 문서만 읽으면, 동일한 방식으로 Tech Spec/TODO를 해석하고 다음 작업을 이어갈 수 있어야 한다.

---

## 0. 이 문서의 목표

1. **단일 규칙서(Single Source of Truth)**
   - 앞으로 진행할 모든 프로젝트에서 공통으로 사용할 **문서 작성 규칙**을 정의한다.
   - iOS, Android, Web, Backend, Flutter 등 어떤 스택에도 그대로 적용 가능해야 한다.

2. **AI가 이해하고 움직일 수 있는 문서 구조**
   - 사람만 이해하는 기획서가 아니라, **AI가 읽고 바로 행동 계획으로 변환할 수 있는 형식**을 정의한다.
   - 다른 세션, 다른 AI 모델이라도 이 규칙만 알면 **동일한 방식으로 작업을 이어갈 수 있도록** 한다.

3. **실패 경험을 지식으로 환원**
   - 개발 중에 발생한 실패/에러를 **error_logs.md**에 구조적으로 기록하고,
   - 그 내용을 다시 Tech Spec과 TODO 작성에 반영하는 **피드백 루프**를 만든다.

---

## 1. 전체 문서 구조

기본적으로 프로젝트의 문서 구조는 다음처럼 구성한다고 가정한다.

```text
docs/
  overview.md          # 전체 개요, 문서 네비게이션
  requirements.md      # 요구사항 정의
  architecture.md      # 아키텍처, 계층, 의존성 구조
  data_flow.md         # 데이터 흐름, 에러 플로우
  ui_design.md         # 화면/UX 구조
  error_logs.md        # 개발 중 발생한 에러, 실패 기록

  tech_spec.md         # 이 규칙에 따라 작성된 Tech Spec (프로젝트별)
  todo.md              # 이 규칙에 따라 작성된 TODO/Plan 문서 (프로젝트별)
  howToMakeTechSpecAndTODO.md  # 바로 지금 이 문서 (전역 규칙서)
```

- `howToMakeTechSpecAndTODO.md`는 **프로젝트 공통 규칙서**이다.
- 각 프로젝트는 이 문서를 기준으로 **자기만의 `tech_spec.md`, `todo.md`**를 만든다.
- AI는 항상 다음 순서로 문서를 읽는다고 가정한다.
  1. `howToMakeTechSpecAndTODO.md` (현재 문서)
  2. `overview.md`
  3. `tech_spec.md`
  4. `todo.md`
  5. 필요 시 `requirements.md`, `architecture.md`, `data_flow.md`, `ui_design.md`, `error_logs.md`

---

## 2. Tech Spec의 정의와 목적

### 2.1 Tech Spec이란

Tech Spec은 **“어떤 시스템을 어떤 제약과 구조 안에서 만들 것인지”를 정의하는 기술 명세 문서**다.

- 기획서처럼 스토리를 길게 풀어 쓰는 문서가 아니라,
- AI와 개발자가 함께 참고하는 **행동 지침 + 시스템 설명서**에 가깝다.

### 2.2 Tech Spec이 반드시 답해야 하는 질문

Tech Spec은 최소한 아래 질문에 대해 답을 제공해야 한다.

1. **무엇을 만들 것인가? (What)**
   - 주요 기능, 사용 시나리오, 유저 플로우
2. **왜 만드는가? (Why)**
   - 목표, 기대 효과, 품질 기준
3. **어디까지 / 어디까지는 안 하는가? (Scope / Non-Scope)**
   - 이번 버전에서 포함/제외 범위
4. **어떤 구조로 만들 것인가? (Architecture)**
   - 레이어 구조, 모듈 간 의존성, 데이터 흐름
5. **무엇을 반드시 지켜야 하는가? (Constraints)**
   - 사용해야 하는 스택, 사용 금지 라이브러리, 코딩 스타일, 패턴
6. **어떻게 검증할 것인가? (Validation)**
   - 동작 검증 기준, 테스트 전략, 에러 처리 기본 원칙

이 문서를 읽는 AI는 위 질문에 대한 답만 보고도 **“어떤 식으로 구현해야 하는지”를 유추할 수 있어야 한다.**

---

## 3. Tech Spec 작성 원칙

### 3.1 문장은 “해야 할 것”으로만 정의한다

- **하지 말아야 할 것(금지 목록)**을 나열하지 않는다.
- 대신 **해야 할 행동과 제약을 구체적으로 적어서** AI가 자연스럽게 그 외의 행동을 선택하지 못하도록 만든다.

예시:

- 나쁜 예시:
  - × `외부 API를 직접 호출하지 말 것.`
- 좋은 예시:
  - ✓ `모든 외부 API 호출은 Repository 계층을 통해서만 이루어진다.`
  - ✓ `ViewModel에서 네트워크 라이브러리(Ktor, Alamofire 등)를 직접 사용하지 않는다.`

### 3.2 애매한 표현을 제거한다

AI가 해석에 따라 다르게 행동할 수 있는 표현을 줄인다.

- × `가능하면 빠르게 동작하도록 한다.`
- ✓ `목록 화면은 3G 환경 기준으로 2초 이내에 첫 번째 데이터를 렌더링해야 한다.`

### 3.3 한 섹션당 한 가지 책임만

Tech Spec은 다음 섹션들로 나누되, **각 섹션의 책임을 명확히 나눈다.**

1. 프로젝트 메타 정보
2. 목표 및 배경
3. 기능 목록 및 유저 플로우
4. 도메인 모델 정의
5. 아키텍처 & 계층 구조
6. 데이터 흐름 & 에러 처리
7. 비기능 요구사항 (성능, 보안, 로깅 등)
8. 테스트 전략 개요

---

## 4. Tech Spec 템플릿

각 프로젝트의 `tech_spec.md`는 아래 템플릿을 기반으로 작성한다.

```markdown
# Tech Spec — 프로젝트 이름

## 1. 메타 정보
- 문서 버전: 0.1.0
- 작성일: YYYY-MM-DD
- 작성자: 이름
- 대상 플랫폼: iOS / Android / Web / Backend / Flutter 등
- 관련 문서:
  - overview.md
  - requirements.md
  - architecture.md
  - data_flow.md
  - ui_design.md
  - error_logs.md

---

## 2. 목표 (Goal)
- 이 시스템/기능이 해결해야 하는 문제를 한 문단으로 작성한다.
- 사용자의 입장에서 어떤 가치를 제공하는지 정리한다.

예)
- 사용자는 고양이 정보를 카드 형식으로 탐색하고, 관심 있는 고양이를 즐겨찾기로 저장할 수 있어야 한다.

---

## 3. 범위와 비범위 (Scope & Non-Scope)

### 3.1 Scope
- 이 버전에서 반드시 포함할 기능 목록을 bullet로 작성한다.

### 3.2 Non-Scope
- 이번 버전에서 다루지 않는 항목을 명시한다.
  - 단, "하지 말 것"이 아니라 **이번 버전에서 고려하지 않는 기능**의 리스트로 한정한다.

---

## 4. 주요 시나리오 / 유저 플로우

- 주요 플로우를 텍스트로 명시한다.
- 필요 시 시퀀스 다이어그램, 플로우 다이어그램을 링크한다.

예)
1. 앱 실행 → 홈 화면에서 고양이 카드 목록 표시
2. 카드 탭 → 상세 정보 화면 이동
3. "하트" 버튼 탭 → 즐겨찾기 토글

---

## 5. 도메인 모델 정의

- 핵심 엔티티와 관계를 작성한다.
- 각 엔티티별 필드, 타입, 설명을 명시한다.

예)

### 5.1 Cat
- id: String
- name: String
- age: Int
- imageUrl: String
- isFavorite: Bool

---

## 6. 아키텍처 & 계층 구조

- 사용되는 아키텍처 패턴을 명시(MVVM, Clean Architecture 등)
- 계층별 책임을 한 문단씩 정리한다.

예)
- **View**: UI 렌더링, 사용자 입력 이벤트 전달
- **ViewModel**: 상태 관리, UseCase 호출, UI 전용 모델 매핑
- **UseCase / Interactor**: 도메인 로직 처리
- **Repository**: 데이터 소스 추상화 (Remote / Local)
- **DataSource**: 구체 구현 (API, DB 등)

---

## 7. 데이터 흐름 & 에러 처리 규칙

- 데이터가 어떤 순서로 흐르는지, 실패 시 어떤 fallback을 사용하는지 명시한다.
- AppError, DomainError 등의 에러 타입이 있다면 유형별 처리 방법을 적는다.

예)
- 모든 네트워크 오류는 `networkUnavailable` 또는 `httpStatus(code)`로 매핑한다.
- Repository는 네트워크 실패 시 가능한 경우 **로컬 캐시(CoreData 등)** 를 먼저 조회한다.
- 로컬 캐시도 없으면 `offlineDataUnavailable` 에러로 ViewModel로 전달한다.

---

## 8. 비기능 요구사항 (Non-Functional Requirements)

- 성능, 보안, 로깅, 모니터링, 추적 등 비기능 요구사항을 정의한다.

예)
- 홈 화면 목록 로딩은 3G 기준 2초 이내에 완료해야 한다.
- API 호출 실패는 error_logs.md에 기록 가능한 형태로 로깅해야 한다.

---

## 9. 테스트 전략 개요

- 어떤 수준의 테스트를 최소한 보장할 것인지 정의한다.

예)
- 도메인 로직은 Unit Test를 작성한다.
- 주요 유저 플로우는 최소 1개 이상의 E2E 시나리오를 가진다.

---

## 10. 변경 이력 (Change Log)

- v0.1.0 — 최초 작성
- v0.2.0 — 데이터 흐름 및 에러 처리 규칙 보강
```

---

## 5. TODO 문서의 정의와 목적

### 5.1 TODO란 무엇인가

TODO 문서는 **Tech Spec을 실제 실행 가능한 작업 단위로 쪼개놓은 실행 계획서**이다.

- WBS처럼 일정/담당자까지 포함할 수 있지만,
- 핵심은 **“AI가 하나의 TODO를 보고 스스로 행동할 수 있는 최소 단위”**로 만드는 것이다.

### 5.2 TODO가 답해야 할 질문

각 TODO 항목은 최소한 아래 정보를 담아야 한다.

1. **어떤 작업인가? (Title)**
2. **왜 하는가? (Purpose)** — Tech Spec의 어느 부분을 구현하는가?
3. **어디까지 하면 끝인가? (Definition of Done)**
4. **어떻게 검증할 것인가? (Test)**
5. **어떤 문서를 참고해야 하는가? (Links)**

---

## 6. TODO 템플릿

`todo.md`는 아래 템플릿을 기반으로 작성한다.

```markdown
# TODO — 프로젝트 이름

## 상태 규칙
- [ ] `TODO`   : 아직 착수하지 않은 작업
- [~] `DOING` : 진행 중인 작업 (필요 시 표기)
- [x] `DONE`  : 완료된 작업 (테스트 통과)

---

## 1. 초기 세팅

### T-001 — 프로젝트 기본 세팅
- 상태: [ ] TODO
- 목적: Xcode/Android Studio/Flutter 프로젝트 기본 구조를 생성한다.
- 관련 Tech Spec 섹션: 6. 아키텍처 & 계층 구조
- 작업 내용:
  - 프로젝트 템플릿 생성
  - 기본 폴더 구조 구성 (Presentation/Domain/Data 등)
- Definition of Done:
  - 앱이 빈 화면이지만 빌드 & 실행 가능해야 한다.
  - 폴더 구조가 Tech Spec과 일치한다.
- Test:
  - 로컬 빌드 성공 여부 확인
  - 시뮬레이터/디바이스에서 앱 실행 확인
- 참고 문서:
  - tech_spec.md#6-아키텍처--계층-구조

---

### T-002 — 도메인 모델 정의 반영
- 상태: [ ] TODO
- 목적: Tech Spec의 도메인 모델(Cat 등)을 코드로 정의한다.
- 관련 Tech Spec 섹션: 5. 도메인 모델 정의
- 작업 내용:
  - `Cat` 구조체/클래스 생성
  - 필요한 필드, 타입 모두 선언
- Definition of Done:
  - 컴파일 에러 없이 빌드 가능
  - 필드, 타입이 Tech Spec과 100% 일치
- Test:
  - 간단한 Unit Test로 인스턴스를 생성해본다.
- 참고 문서:
  - tech_spec.md#5-도메인-모델-정의

---

## 2. 기능 개발

### T-010 — 고양이 목록 API 연동
- 상태: [ ] TODO
- 목적: 고양이 목록을 서버에서 받아와 Repository를 통해 화면까지 전달한다.
- 관련 Tech Spec 섹션:
  - 4. 주요 시나리오 / 유저 플로우
  - 7. 데이터 흐름 & 에러 처리 규칙
- 작업 내용:
  - `CatRepository` 인터페이스 정의
  - `RemoteCatDataSource` 구현
  - ViewModel에서 Repository를 호출해 상태 업데이트
- Definition of Done:
  - 정상 네트워크 환경에서 고양이 목록이 화면에 표시된다.
  - 네트워크 실패 시 에러 상태가 ViewModel에 전달되고, UI는 에러 메시지를 표시한다.
- Test:
  - Mock Repository를 사용해 ViewModel Unit Test 작성
  - 실제 API 호출 시 정상/실패 케이스 각각 확인
- 참고 문서:
  - tech_spec.md#4-주요-시나리오--유저-플로우
  - tech_spec.md#7-데이터-흐름--에러-처리-규칙

---

## 3. 버그 수정 / 에러 대응

### B-001 — GIF 로딩 지연 이슈 해결
- 상태: [ ] TODO
- 목적: 느린 네트워크에서 GIF 이미지 로딩 지연 문제를 해결한다.
- 관련 에러 로그:
  - error_logs.md#2025-01-12-이미지-캐싱-실패-이슈
- 작업 내용:
  - 이미지 캐싱 전략 수정 (예: CoreData Binary 저장 강제)
  - 스크롤 시 재요청 최소화
- Definition of Done:
  - 3G 환경에서 스크롤 시 GIF 재생이 끊기지 않는다.
- Test:
  - 느린 네트워크 시뮬레이션 환경에서 스크롤 테스트
  - 기존 에러 재현이 더 이상 발생하지 않음 확인
- 참고 문서:
  - tech_spec.md#7-데이터-흐름--에러-처리-규칙
  - error_logs.md#2025-01-12-이미지-캐싱-실패-이슈
```

---

## 7. 실패/에러를 기록하는 방법 — error_logs.md 규칙

### 7.1 왜 따로 기록해야 하는가

- 기획 단계에서는 "될 거라고 생각했던 것"이 실제로는 안 되는 경우가 많다.
- 이때 **왜 안 되었는지, 무엇을 수정했는지**를 남겨두면,
  - 다음 기획 단계에서 미리 조심할 수 있고,
  - 같은 실수를 반복하지 않게 된다.

### 7.2 error_logs.md 템플릿

```markdown
# Error Logs — 프로젝트 이름

## YYYY-MM-DD — 에러/이슈 제목

### 1. 기획 단계의 가정
- 당시 기획/설계에서 어떻게 생각하고 있었는지 요약한다.
- 예) GIF는 URL만 있으면 바로 로딩될 것이라고 가정했다.

### 2. 실제 발생한 문제
- 어떤 상황에서 어떤 문제가 발생했는지 구체적으로 적는다.
- 예) 3G 환경에서 스크롤 시 GIF가 계속 끊기고, 프레임 드랍 발생.

### 3. 원인 분석
- 로그, 디버깅, 추론 등을 통해 파악한 Root Cause를 적는다.
- 예) GIF 파일 용량이 크고, 스크롤 시 재요청이 계속 발생.

### 4. 해결 방법
- 코드/구조/설계 측면에서 어떻게 해결했는지 정리한다.
- 예) CoreData에 이미지 바이너리를 저장하고, 네트워크는 최초 1회만 호출.

### 5. Tech Spec/TODO에 반영해야 할 내용
- 이번 경험을 앞으로의 Tech Spec/TODO 작성 시 어떤 식으로 반영할지 정리한다.
- 예)
  - Tech Spec: GIF/이미지 자산은 반드시 로컬 캐시 전략을 명시한다.
  - TODO: "이미지 캐싱 전략 정의" 항목을 별도 Task로 분리한다.

### 6. 관련 커밋/PR 링크 (선택)
- 이 이슈를 해결한 커밋이나 PR 링크를 남긴다.
```

---

## 8. AI 세션/모델 간 인수인계를 위한 규칙

### 8.1 어떤 AI든, 세션이 달라도 공통으로 따라야 할 순서

1. `howToMakeTechSpecAndTODO.md`를 읽고, 문서 작성/해석 규칙을 이해한다.
2. `overview.md`를 읽어 프로젝트 전체 맥락을 파악한다.
3. `tech_spec.md`를 읽고, 시스템 목표/구조/제약을 이해한다.
4. `todo.md`에서 **[ ] TODO 상태인 항목들**을 확인한다.
5. 우선순위가 가장 높은 TODO를 선택한다.
6. TODO에 명시된 참고 문서(Tech Spec 섹션, error_logs 등)를 읽는다.
7. 작업을 수행한다.
8. Definition of Done과 Test 항목에 따라 검증한다.
9. 완료되면:
   - `todo.md`의 해당 항목 상태를 [x] DONE으로 변경하라고 제안한다.
   - 필요 시 error_logs.md에 새 이슈/교훈을 추가하라고 제안한다.

### 8.2 세션 종료 시 남겨야 할 메모 (선택)

- 작업 중간에 끝나는 경우, 아래 정보를 간단히 남긴다.
  - 어떤 TODO를 진행 중이었는지 (ID, 제목)
  - 어디까지 완료했는지
  - 남은 작업은 무엇인지
  - 다음 세션에서 먼저 확인해야 할 문서/코드 위치

이 정보는 별도 `session_notes.md` 파일로 관리할 수 있다.

---

## 9. 이 규칙을 프로젝트에 적용하는 순서

1. `howToMakeTechSpecAndTODO.md`를 레포지토리의 `docs/` 루트에 둔다.
2. 새로운 프로젝트를 시작할 때:
   - `tech_spec.md`를 템플릿 기반으로 생성한다.
   - `todo.md`를 템플릿 기반으로 생성한다.
   - `error_logs.md`를 초기화한다.
3. 개발을 진행하면서:
   - 새로운 기능은 항상 Tech Spec에 먼저 정의하고,
   - 그 이후 TODO로 쪼개서 실행한다.
4. 에러/실패가 발생하면:
   - error_logs.md에 기록하고,
   - 필요한 경우 Tech Spec과 TODO를 갱신한다.
5. 다음 프로젝트를 시작할 때:
   - 이전 프로젝트의 error_logs.md와 Tech Spec을 참고하여,
   - 초반 기획부터 리스크를 줄여나간다.

---

## 10. 마지막 정리

- **Tech Spec**은 "무엇을, 왜, 어떤 구조와 제약 안에서 만들 것인지"를 정의하는 문서다.
- **TODO**는 Tech Spec을 기반으로 "어떤 단위 작업을 어떤 기준으로 끝낼 것인지"를 정의하는 문서다.
- **error_logs**는 "기획/설계에서 예상하지 못했던 실패"를 기록하고, 다시 기획/설계에 반영하기 위한 피드백 저장소다.
- 이 세 가지를 **항상 같은 패턴으로 작성**하면, 어떤 AI 모델이든 이 문서만 읽고도 프로젝트를 이해하고, 실패를 학습하며, 다음 작업을 이어갈 수 있다.
